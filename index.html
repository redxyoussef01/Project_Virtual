<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Warehouse Visualization</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
        .label {
            position: absolute;
            background-color: white;
            padding: 5px;
            border: 1px solid #ccc;
            display: none;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="label" class="label"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FontLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/geometries/TextGeometry.js"></script>
    <script>
        // Set up scene, camera, and renderer
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Resize handler
        window.addEventListener('resize', () => {
            const width = window.innerWidth;
            const height = window.innerHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
        });

        // Add lighting
        const ambientLight = new THREE.AmbientLight(0x404040); // Soft white light
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
        directionalLight.position.set(1, 1, 1).normalize();
        scene.add(directionalLight);

        // Font loader
        const fontLoader = new THREE.FontLoader();
        let font;
        fontLoader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', function (loadedFont) {
            font = loadedFont;
            console.log("Font loaded"); // Debugging statement
            // Add shelves to the scene after the font is loaded
            const letters = 'ABCDEFGHIJ'.split('');
            for (let i = 0; i < letters.length; i++) {
                createShelf(i * 4 - 10, 2.5, 0, letters[i]); // Increased spacing to 3 units
            }

            // Define products and their details
    
                const productsData = [
                { x: -10.5, y: -1, z: 0, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: 1, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: 2, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: 3, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: 4, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: 5, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: 6, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: -1, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: -2, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: -3, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: -4, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: -5, details: 'Product A2: Description' },
                { x: -10.5, y: -1, z: -6, details: 'Product A2: Description' },
                
                 { x: -10.5, y: 0, z: -6, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: -5, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: -4, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: -3, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: -2, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: -1, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: 0, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: 1, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: 2, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: 3, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: 4, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: 5, details: 'Product A3: Description' },
    { x: -10.5, y: 0, z: 6, details: 'Product A3: Description' },
    { x: -10.5, y: 2, z: -6, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: -5, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: -4, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: -3, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: -2, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: -1, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: 0, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: 1, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: 2, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: 3, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: 4, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: 5, details: 'Product A1: Description' },
    { x: -10.5, y: 2, z: 6, details: 'Product A1: Description' },
    { x: -10.5, y: 1, z: -6, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: -5, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: -4, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: -3, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: -2, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: -1, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: 0, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: 1, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: 2, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: 3, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: 4, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: 5, details: 'Product A2: Description' },
    { x: -10.5, y: 1, z: 6, details: 'Product A2: Description' },
    { x: -10.5, y: 3, z: -6, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: -5, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: -4, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: -3, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: -2, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: -1, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: 0, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: 1, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: 2, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: 3, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: 4, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: 5, details: 'Product A1: Description' },
    { x: -10.5, y: 3, z: 6, details: 'Product A1: Description' },
    { x: -10.5, y: 4, z: -6, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: -5, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: -4, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: -3, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: -2, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: -1, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: 0, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: 1, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: 2, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: 3, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: 4, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: 5, details: 'Product A2: Description' },
    { x: -10.5, y: 4, z: 6, details: 'Product A2: Description' },
    { x: -10.5, y: 5, z: -6, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: -5, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: -4, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: -3, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: -2, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: -1, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: 0, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: 1, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: 2, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: 3, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: 4, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: 5, details: 'Product A1: Description' },
    { x: -10.5, y: 5, z: 6, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: -6, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: -5, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: -4, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: -3, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: -2, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: -1, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: 0, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: 1, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: 2, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: 3, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: 4, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: 5, details: 'Product A1: Description' },
    { x: -10.5, y: 6, z: 6, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: -6, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: -5, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: -4, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: -3, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: -2, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: -1, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: 0, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: 1, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: 2, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: 3, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: 4, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: 5, details: 'Product A1: Description' },
    { x: -10.5, y: 7, z: 6, details: 'Product A1: Description' }
            ];
            

            // Add products to the scene
            productsData.forEach(product => {
                createProduct(product.x, product.y, product.z, product.details);
            });
        });

        // Create warehouse shelves
        function createShelf(x, y, z, letter) {
            const geometry = new THREE.BoxGeometry(1, 10, 13);
            const material = new THREE.MeshStandardMaterial({ color: 0x8B4513 }); // SaddleBrown color
            const shelf = new THREE.Mesh(geometry, material);
            shelf.position.set(x, y, z);
            scene.add(shelf);

            console.log(`Shelf ${letter} created at (${x}, ${y}, ${z})`); // Debugging statement

            // Create text only if the font is loaded
            if (font) {
                const textGeometry = new THREE.TextGeometry(letter, {
                    font: font,
                    size: 1,
                    height: 0.1,
                });
                const textMaterial = new THREE.MeshStandardMaterial({ color: 0xffffff });
                const text = new THREE.Mesh(textGeometry, textMaterial);
                text.position.set(x - 0.5, y - 5.5, z + 6.5);
                scene.add(text);
                console.log(`Text created for shelf ${letter}`); // Debugging statement
            } else {
                console.error("Font not loaded yet"); // Debugging statement
            }

            // Click event listener for shelf
            shelf.addEventListener('click', function() {
                // Hide all other shelves
                scene.children.forEach(child => {
                    if (child instanceof THREE.Mesh && child !== shelf) {
                        child.visible = false;
                    }
                });

                // Show products with similar x-coordinate
                const tolerance = 1; // Adjust tolerance as needed
                products.forEach(product => {
                    if (Math.abs(product.position.x - x) <= tolerance) {
                        product.visible = true;
                    } else {
                        product.visible = false;
                    }
                });
            });
        }

        // Create products with details
        const products = [];
        function createProduct(x, y, z, details) {
            const geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);
            const material = new THREE.MeshStandardMaterial({ color: 0xC1C1C1 }); // Gray color
            const product = new THREE.Mesh(geometry, material);
            product.position.set(x, y, z);
            product.userData.details = details;
            products.push(product);
            scene.add(product);
            console.log(`Product created at (${x}, ${y}, ${z})`); // Debugging statement
        }

        // Camera position
        camera.position.z = 20;
        camera.position.y = 5;

        // Add OrbitControls for better interaction
        const controls = new THREE.OrbitControls(camera, renderer.domElement);

        // Raycaster and mouse vector
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        // Label element
        const label = document.getElementById('label');

        // Mouse move event
        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(products);

            if (intersects.length > 0) {
                const intersected = intersects[0].object;
                label.style.display = 'block';
                label.style.left = event.clientX + 'px';
                label.style.top = event.clientY + 'px';
                label.innerHTML = intersected.userData.details;
            } else {
                label.style.display = 'none';
            }
        }
        window.addEventListener('mousemove', onMouseMove, false);

        // Render loop
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
